<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Playground - YouTube Stream URL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .gradient-top {
            background: linear-gradient(180deg, #1e1e2e 0%, #111827 100%);
        }

        .glass-panel {
            background: rgba(31, 41, 55, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(75, 85, 99, 0.4);
        }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen p-6">

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 h-[90vh]">

        <!-- Left Panel: Controls -->
        <div class="lg:col-span-1 space-y-4 flex flex-col h-full">
            <div class="glass-panel p-6 rounded-2xl shadow-xl flex-none">
                <h1
                    class="text-2xl font-bold mb-1 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                    API Playground</h1>
                <p class="text-xs text-gray-400 mb-6">Interactive Developer Console</p>

                <!-- Search Mode -->
                <div class="space-y-4">
                    <div>
                        <label
                            class="text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-2">Endpoint</label>
                        <div class="flex bg-gray-800 rounded-lg p-1">
                            <button onclick="setMode('youtube')" id="btn-youtube"
                                class="flex-1 py-2 text-xs font-medium rounded-md bg-red-600 text-white shadow transition">YouTube
                                Search</button>
                            <button onclick="setMode('spotify')" id="btn-spotify"
                                class="flex-1 py-2 text-xs font-medium rounded-md text-gray-400 hover:text-white transition">Spotify
                                Search</button>
                        </div>
                    </div>

                    <div>
                        <label
                            class="text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-2">Query</label>
                        <input type="text" id="search-query" placeholder="Enter keywords..."
                            class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-sm focus:outline-none focus:border-blue-500 transition text-white">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-2">Limit</label>
                            <input type="number" id="search-limit" value="5" min="1" max="50"
                                class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-sm focus:outline-none focus:border-blue-500 transition text-white">
                        </div>
                        <div>
                            <label
                                class="text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-2">Spotify
                                Type</label>
                            <select id="spotify-type"
                                class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-sm focus:outline-none focus:border-blue-500 transition text-white disabled:opacity-50"
                                disabled>
                                <option value="track">Track</option>
                                <option value="album">Album</option>
                                <option value="playlist">Playlist</option>
                                <option value="artist">Artist</option>
                            </select>
                        </div>
                    </div>

                    <button onclick="performSearch()"
                        class="w-full bg-blue-600 hover:bg-blue-500 text-white font-semibold py-3 rounded-lg shadow-lg shadow-blue-900/30 transition flex items-center justify-center gap-2">
                        <i data-lucide="search" class="w-4 h-4"></i>
                        <span>Execute Request</span>
                    </button>
                </div>
            </div>

            <!-- Manual Stream -->
            <div class="glass-panel p-6 rounded-2xl shadow-xl flex-none">
                <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider block mb-2">Direct URL
                    Test</label>
                <div class="flex gap-2">
                    <input type="text" id="direct-url" placeholder="https://youtube.com/watch?v=..."
                        class="flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-xs focus:outline-none focus:border-green-500 transition text-white">
                    <button onclick="getStreamFromUrl()"
                        class="bg-gray-700 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-xs font-medium transition">Get</button>
                </div>
            </div>

            <!-- Console Log -->
            <div class="glass-panel p-4 rounded-2xl shadow-xl flex-1 overflow-hidden flex flex-col min-h-[200px]">
                <div class="flex justify-between items-center mb-2">
                    <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Output Log</label>
                    <button onclick="clearLog()" class="text-xs text-gray-500 hover:text-white">Clear</button>
                </div>
                <div id="console-output"
                    class="flex-1 bg-gray-950 rounded-lg p-3 text-xs font-mono text-green-400 overflow-y-auto whitespace-pre-wrap">
                    Waiting for request...</div>
            </div>
        </div>

        <!-- Right Panel: Results & Player -->
        <div class="lg:col-span-2 flex flex-col h-full gap-6">

            <!-- Player Widget -->
            <div class="glass-panel p-6 rounded-2xl shadow-xl flex items-center gap-6 hidden" id="player-container">
                <div class="relative w-24 h-24 flex-none rounded-xl overflow-hidden shadow-lg group">
                    <img id="player-thumb" src="" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                    </div>
                </div>
                <div class="flex-1 min-w-0">
                    <h3 id="player-title" class="text-lg font-bold text-white truncate">Select a track</h3>
                    <p id="player-artist" class="text-sm text-gray-400 truncate mb-3">No audio playing</p>
                    <audio id="audio-element" controls
                        class="w-full h-8 opacity-80 invert decoration-slate-500"></audio>
                </div>
            </div>

            <!-- Results List -->
            <div class="glass-panel rounded-2xl shadow-xl flex-1 overflow-hidden flex flex-col">
                <div class="p-6 border-b border-gray-800">
                    <h2 class="text-lg font-semibold text-white">Results</h2>
                </div>
                <div id="results-container" class="flex-1 overflow-y-auto p-6 space-y-3">
                    <div class="text-center text-gray-500 mt-20">
                        <i data-lucide="activity" class="w-12 h-12 mx-auto mb-3 opacity-20"></i>
                        <p>Perform a search to see results here</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Template for Result Item -->
    <template id="result-template">
        <div
            class="bg-gray-800/50 hover:bg-gray-700/80 border border-gray-700/50 rounded-xl p-3 flex items-center gap-4 transition group cursor-pointer">
            <div class="relative w-16 h-16 flex-none rounded-lg overflow-hidden">
                <img class="result-thumb w-full h-full object-cover" src="">
                <button
                    class="play-btn absolute inset-0 bg-black/40 hidden group-hover:flex items-center justify-center text-white">
                    <i data-lucide="play" class="w-6 h-6 fill-current"></i>
                </button>
            </div>
            <div class="flex-1 min-w-0">
                <h4 class="result-title text-sm font-semibold text-white truncate"></h4>
                <div class="flex items-center gap-2 text-xs text-gray-400 mt-1">
                    <span class="result-artist truncate max-w-[150px]"></span>
                    <span class="w-1 h-1 bg-gray-600 rounded-full"></span>
                    <span class="result-duration"></span>
                </div>
            </div>
            <div class="flex-none flex gap-2">
                <button
                    class="copy-btn text-xs bg-gray-800 hover:bg-blue-600 border border-gray-600 hover:border-blue-500 text-gray-300 hover:text-white px-2 py-1 rounded transition"
                    title="Copy Stream API URL">
                    <i data-lucide="link" class="w-3 h-3"></i>
                </button>
                <button
                    class="json-btn text-xs bg-gray-800 hover:bg-gray-600 border border-gray-600 text-gray-300 px-2 py-1 rounded">JSON</button>
            </div>
        </div>
    </template>

    <script src="/static/playground.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>